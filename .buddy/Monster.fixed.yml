- pipeline: "Monster"
  events:
  - type: "PUSH"
    refs:
    - "refs/heads/main"
  fail_on_prepare_env_warning: true
  actions:
  - action: "        docker_image_tag: latest"
    type: "BUILD"
    docker_image_name: "library/python"
    docker_image_tag: "3.13"
    execute_commands:
    - "pipelines:"
    - "  - name: Build and Test C Project"
    - "    trigger_mode: ON_PUSH"
    - "    ref_name: main"
    - ""
    - "    actions:"
    - "      - action: Build C Project"
    - "        type: EXECUTE"
    - "        script:"
    - "          - gcc -o monster monster.c"
    - "        docker_image_name: gcc"
    - "        docker_image_tag: latest"
    - ""
    - "      - action: Run Tests"
    - "        type: EXECUTE"
    - "        script:"
    - "          - ./monster"
    - "        docker_image_name: gcc"
    - "        docker_image_tag: latest"
    - ""
    - "      - action: Clean Up"
    - "        type: EXECUTE"
    - "        script:"
    - "          - rm -f monster"
    - "        docker_image_name: gcc"
    - "        docker_image_tag: latest"
    - ""
    - "  - name: Run Python Script"
    - "    trigger_mode: ON_PUSH"
    - "    ref_name: main"
    - ""
    - "    actions:"
    - "      - action: Execute Python Script"
    - "        type: EXECUTE"
    - "        script:"
    - "          - python3 monster.py"
    - "        docker_image_name: python"
    - "        docker_image_tag: latest"
    - ""
    cached_dirs:
    - "/root/.cache/pip"
    shell: "BASH"
